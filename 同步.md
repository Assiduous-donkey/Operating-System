# 同步问题

## 进程同步

### 同步与互斥

1. 同步：多个进程因为合作和使得进程的执行有一定的先后顺序。

2. 互斥：多个进程在同一时刻只有一个进程能进入临界区

3. 临界区：互斥资源或互斥变量，一次只能给一个进程使用。

### 并发、并行与异步

1. 并发：同一**时间段**中同时有多个程序在运行，但其实任一时刻只有一个程序真正在CPU上运行。

2. 并行：在多CPU系统中，多个程序同时在不同的CPU上执行

3. 异步：等待某个资源时继续做自己的事

### 进程同步策略

1. 管程：管程将共享变量以及对这些共享变量的操作封装起来形成一个具有一定接口的模块。故**只能通过管程提供的某个过程才能访问管程中的资源**。

    - 进程需要**互斥地使用管程**，且使用完之后必须释放管程并唤醒入口等待队列中的进程。

    - 当一个进程试图进入管程时，在入口等待队列中等待。

2. 信号量

    - 每个同步关系需要一个信号量

    - 一个同步关系的前驱动作完成后执行V操作，释放资源

    - 一个同步关系的后继动作执行前执行P操作，锁定资源。

### 线程同步策略

有时候线程需要和其他线程共享资源，如内存、数据库等。

1. 互斥量(Mutex)：互斥量是内核对象且**只有一个**，只有拥有互斥量的线程才有访问互斥资源的权限。

2. 信号量(Semaphore)：信号量是内核对象，需要控制同一时刻访问此资源的最大线程数量。信号量对象保存了**最大可用资源数**和**当前可用资源数**。若信号的取值为0或1，则信号量成为互斥量。

3. 事件：通过通知操作的方式来保持线程同步。例如在网络应用程序中，一个线程A赋值监听端口，另一个线程B负责更新用户数据。通过事件机制，A可以通知B何时进行数据更新。（golang的channel?）
